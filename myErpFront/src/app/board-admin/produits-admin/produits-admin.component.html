
<div class="main-wrapper">
  <div class="page-wrapper">
  <div class="content container-fluid">
  <div class="page-header">
  <div class="row">
  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
  <h5 class="text-uppercase mb-0 mt-0 page-title">Produits</h5>
  </div>
  <div class="col-lg-6 col-md-6 col-sm-6 col-12">
  <ul class="breadcrumb float-right p-0 mb-0">
  <li class="breadcrumb-item"><a href="javascript:void()"><i class="fas fa-home"></i> Accueil</a></li>
  <li class="breadcrumb-item"><a href="javascript:void()">Produits</a></li>
  <li class="breadcrumb-item"><span>Liste des produits</span></li>
  </ul>
  </div>
  </div>
  </div>
  <div class="content-page">
  <div class="row">
  <div class="col-sm-5 col-4">
  </div>
  <div class="col-sm-7 col-8 text-right add-btn-col">
  <a href="javascript:void()" (click)="openAdd()"  data-toggle="modal" data-target="#add"
  class="btn btn-success btn-rounded">
    <i class="fas fa-plus"></i> Ajouter produit</a>
  </div>
  </div>
  <div class="row filter-row">
  <div class="col-sm-6 col-md-3">
  <div class="form-group form-focus">
  <input class="form-control datetimepicker-input floating datetimepicker"
  type="text" data-toggle="datetimepicker" [(ngModel)]="searchbynum">
  <label class="focus-label">Nom produit</label>
  </div>

  </div>
  <div class="col-sm-6 col-md-3">
    <div class="form-group form-focus">
    <input class="form-control datetimepicker-input floating datetimepicker"
    type="text" [(ngModel)]="searchbyprix"  data-toggle="datetimepicker"
     >
    <label class="focus-label">Prix</label>
    </div>
    </div>



  <div class="col-sm-6 col-md-3">
  <a href="javascript:void(0)" (click)="search()" class="btn btn-search rounded btn-block mb-3">
     Search </a>
  </div>
  </div>
  <div class="row">
  <div class="col-md-12">
  <div class="table-responsive">
  <table class="table custom-table datatable mb-0">
  <thead class="thead-light">
  <tr>
  <th>Image</th>
  <th>Nom du produit</th>
  <th>Prix</th>
  <th class="text-right">Action</th>
  </tr>
  </thead>
  <tbody *ngFor="let produit of produits" >
  <tr *ngIf="(produit.nom.toLowerCase().includes(searchbynum.toLowerCase())) || (produit.prix == searchbyprix)">
    <td>
      <h2>
      <!-- <a href="profile.html" class="avatar text-white">P</a> -->
      <a href="javascript:void(0)" class="avatar text-white">
        <img [src]="produit.image" height="40px" width="40px">
      </a>
      <!-- <a href="profile.html">Parker <span></span></a> -->
      </h2>
      </td>
  <td>{{produit.nom}}</td>
  <td>{{produit.prix}}</td>


  <!-- <td>{{facture.user.username}}</td> -->
  <td class="text-right">
  <div class="dropdown dropdown-action">
  <a href="#" class="action-icon dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
    <i class="fas fa-ellipsis-v"></i></a>
  <div class="dropdown-menu dropdown-menu-right">
  <!-- <a class="dropdown-item" href="javascript:void(0)" [routerLink]="['../updatefacture',facture.numero_facture]"><i class="fas fa-pencil-alt m-r-5">
  </i> Edit</a> -->
  <a class="dropdown-item"  (click)="openDetails(produit)" href="javascript:void(0)" data-toggle="modal" data-target="#details" >

    <i class="fas fa-eye m-r-5"></i> Details
  </a>
  <a class="dropdown-item"  (click)="openEdit(produit)" href="javascript:void(0)" data-toggle="modal" data-target="#edit">
    <i class="fas fa-eye m-r-5">

  </i> Modifier</a>
  <!-- <a class="dropdown-item" href="#"><i class="fas fa-file-pdf m-r-5"></i> Download</a> -->
  <a class="dropdown-item"  href="javascript:void(0)"  (click)="deleteProduit(produit.id)">

    <i class="fas fa-trash-alt m-r-5"></i> supprimer</a>
  </div>
  </div>
  </td>
  </tr>
  <div class="modal fade" id="details"
  role="dialog" >
   <div class="modal-dialog modal-dialog-centered"  >
     <div class="modal-content modal-md">
         <div class="modal-header" >
         <h5  class="modal-title" id="exampleModalLabel">Details produit</h5> </div>



       <div class="modal-body" >
        <div >
          <div>
          <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12 col-12">
            <div class="profile-img">
              <a href="javascript:void()" class="avatar">
                <img [src]="produit_details.image">
              </a>
              </div>
          <div class="aboutprofile-name">
          <h5 class="text-center mt-2">{{produit_details.nom}}</h5>
          <!-- <p class="text-center">jj</p> -->
          </div>
          <ul class="list-group list-group-flush">
          <li class="list-group-item"><b>Nom du produit</b><a href="javascript:void(0)"
             class="float-right">{{produit_details.nom}}</a></li><br>
          <li class="list-group-item"><b>Prix</b><a href="javascript:void(0)" class="float-right">{{produit_details.prix}}</a></li><br>

          </ul>
          </div>
          </div>
          </div>

          </div>
          <a  href="#" class="btn btn-danger" style="margin-left: 400px;"
          data-dismiss="modal"    >Close</a>
       </div>



     </div>
   </div>
  </div>
  <div class="modal fade" id="edit"
  role="dialog" >
   <div class="modal-dialog modal-dialog-centered"  >
     <div class="modal-content modal-md">
         <div class="modal-header" >
         <h5  class="modal-title" id="exampleModalLabel">Modifier produit</h5> </div>



       <div class="modal-body" >
         <div class="card">
          <div class="card-body">
          <div>
            <div class="row mt-3" >
              <div  style="margin-left: 70px;">
              <div class="custom-mt-form">
              <div class="form-group">
              <label>Nom du produit</label>
              <input type="text" name="nom" [(ngModel)]="produit_edited.nom" class="form-control" placeholder="Entrer le nom du produit"
              style="width: 300px;" required>
             </div>
              </div>
              </div>
              </div>
              <div style="margin-left: 58px;">
              </div>
              <div style="margin-left: 58px;">
                <div class="custom-mt-form">
                    <div class="form-group" style="width: 300px;">
                      <label for="email">Choisir une image</label>
                      <input type="file" (change)="selectFile($event)" class="form-control" name="image" [(ngModel)]="produit_edited.image"></div>
                </div>
                </div>
                <div style="margin-left: 58px;">
                <div class="custom-mt-form">
                    <div class="form-group" style="width: 300px;">
                      <label for="email">Prix</label>
                      <input type="text" class="form-control" name="prix"  [(ngModel)]="produit_edited.prix" placeholder="Entrer le prix du produit"></div>
                </div>
                </div>
              </div><br>
              <div style="margin-left: 220px;">
                <button class="btn btn-success mr-2"  (click)="editProduit(produit_edited.id)"  data-dismiss="modal"  type="submit">Enregistrer</button>
                <a  class="btn btn-danger" style="color: white;"  data-dismiss="modal" >Fermer</a>
              </div>
         </div>
         </div>
       </div>



     </div>
   </div>
  </div>
  </tbody>
  </table>
  </div>
  </div>
  </div>
  </div>
  </div>
  </div>

  </div>

  <div class="modal fade" id="add"
role="dialog" >
 <div class="modal-dialog modal-dialog-centered"  >
   <div class="modal-content modal-md">
       <div class="modal-header" >
       <h5  class="modal-title" id="exampleModalLabel">Ajouter produit</h5> </div>



     <div class="modal-body" >
       <div class="card">
        <div class="card-body">
        <div>
          <div class="row mt-3" >
            <div  style="margin-left: 70px;">
            <div class="custom-mt-form">
            <div class="form-group">
            <label>Nom du produit</label>
            <input type="text" name="nom" [(ngModel)]="prod.nom" class="form-control" placeholder="Entrer le nom du produit"
            style="width: 300px;" required>
            <div
             class="alert alert-danger mt-2"
             role="alert"
             *ngIf="!prod.nom && (isNomTouched || isSubmitted)"
           >
             Nom est obligatoire!
           </div>
           </div>
            </div>
            </div>
            </div>
            <div style="margin-left: 58px;">
            </div>
            <div style="margin-left: 58px;">
              <div class="custom-mt-form">
                  <div class="form-group" style="width: 300px;">
                    <label for="email">Choisir une image</label>
                    <input type="file" (change)="selectFile($event)" class="form-control"
                     name="image" [(ngModel)]="prod.image">
                     <div
                     class="alert alert-danger mt-2"
                     role="alert"
                     *ngIf="!prod.image && (isNomTouched || isSubmitted)"
                   >
                     Image est obligatoire!
                   </div>
                    </div>
              </div>
              </div>
              <div style="margin-left: 58px;">
              <div class="custom-mt-form">
                  <div class="form-group" style="width: 300px;">
                    <label for="email">Prix</label>
                    <input type="text" class="form-control" name="prix"
                     [(ngModel)]="prod.prix" placeholder="Entrer le prix du produit">
                     <div
                     class="alert alert-danger mt-2"
                     role="alert"
                     *ngIf="!prod.prix && (isNomTouched || isSubmitted)"
                   >
                     Prix est obligatoire!
                   </div>
                    </div>
              </div>
              </div>
            </div><br>
            <div style="margin-left: 220px;">
              <button class="btn btn-success mr-2" (click)="saveproduit()"
              [attr.data-dismiss]=" this.prod.nom && this.prod.image && this.prod.prix ? 'modal' : null"
               type="submit">Enregistrer</button>
              <a  class="btn btn-danger" style="color: white;"  data-dismiss="modal" >Fermer</a>
            </div>
       </div>
       </div>
     </div>



   </div>
 </div>
</div>



